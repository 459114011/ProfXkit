{
	"train":
		{
			"path": "./apc",
			"solver": "SGD",
			"regularizer": "L2",
			"momentum": 0.9,
			"weight_decay": 0.0005,
			"base_lr": 0.01,
			"lr_policy": "LR_inv",
			"lr_gamma": 0.0001,
			"lr_power": 0.75,
			"max_iter": 10000,
			"train_iter": 1,
			"snapshot_iter": 100,
			"display_iter": 1,
			"test_iter": 1,
			"test_interval": 100,
			"debug_mode": false,
			"GPU_solver": 0,
			"GPU": [0]
		},
	"test":
		{
			"debug_mode": false,
			"GPU": 0
		},
	"layers":[
        {
            "type": "APCData",
            "name": "dataTrain",
            "phase": "Training",
            "model": "../data/virtual_world/glue_up_centered.off",
            "intrinsics": "../data/virtual_world/intrinsics.tensor", 
            "extrinsics": "../data/virtual_world/extrinsicsW2C.tensor",
            "batch_size": 2,
            "random": true,
            "xMin": 1.48,
            "xMax": 1.85,
            "yMin": -0.15,
            "yMax": 0.13,
            "zMin": 0.82,
            "zMax": 1.00,
            "unit": 0.0025,
            "margin": 0.0100,
            "width": 640,
            "height": 480,
            "xOutRes": 30,
            "yOutRes": 21,
            "zOutRes": 11,
            "xOutRF": 0.08,
            "yOutRF": 0.08,
            "zOutRF": 0.08,
            "xOutRG": 0.01,
            "yOutRG": 0.01,
            "zOutRG": 0.01,
            "saveFiles": false,
            "fixedPose": false,
            "out": ["data","cls_label", "r_label", "r_weight", "t_label", "t_weight"]            
        },
        {
            "type": "APCData",
            "name": "dataTest",
            "phase": "Testing",
            "model": "../data/virtual_world/glue_up_centered.off",
            "intrinsics": "../data/virtual_world/intrinsics.tensor", 
            "extrinsics": "../data/virtual_world/extrinsicsW2C.tensor",
            "batch_size": 2,
            "random": true,
            "xMin": 1.48,
            "xMax": 1.85,
            "yMin": -0.15,
            "yMax": 0.13,
            "zMin": 0.82,
            "zMax": 1.00,
            "unit": 0.0025,
            "margin": 0.0100,
            "width": 640,
            "height": 480,
            "xOutRes": 30,
            "yOutRes": 21,
            "zOutRes": 11,
            "xOutRF": 0.08,
            "yOutRF": 0.08,
            "zOutRF": 0.08,
            "xOutRG": 0.01,
            "yOutRG": 0.01,
            "zOutRG": 0.01,
            "saveFiles": true,
            "fixedPose": false,
            "out": ["data","cls_label", "r_label", "r_weight", "t_label", "t_weight"]
        },       
		{
            "in": ["data"],
            "type": "Convolution",
            "name": "conv1",
            "num_output": 64,
            "window": [5,5,5],
            "padding": [0,0,0],
            "stride": [1,1,1],
            "upscale": [1,1,1],
            "weight_lr_mult": 1.0,
            "weight_decay_mult": 1.0,
            "weight_filler": "Gaussian",
            "weight_filler_param": 0.01,
            "bias_lr_mult": 2.0,
            "bias_decay_mult": 0.0,
            "bias_filler": "Constant",
            "bias_filler_param": 0.0,
            "out": ["conv1"]
        },
        {
            "in": ["conv1"],
            "type": "Activation",
            "name": "relu1",
            "mode": "ReLU",
            "out": ["conv1"]
        },
        {
            "in": ["conv1"],
            "type": "Pooling",
            "name": "pool1",
            "mode": "max",
            "window": [2,2,2],
            "stride": [2,2,2],
            "out": ["pool1"]
        },
        {
            "in": ["pool1"],
            "type": "Convolution",
            "name": "conv2",
            "num_output": 64,
            "window": [5,5,5],
            "padding": [0,0,0],
            "stride": [1,1,1],
            "upscale": [1,1,1],
            "weight_lr_mult": 1.0,
            "weight_decay_mult": 1.0,
            "weight_filler": "Gaussian",
            "weight_filler_param": 0.01,
            "bias_lr_mult": 2.0,
            "bias_decay_mult": 0.0,
            "bias_filler": "Constant",
            "bias_filler_param": 0.0,
            "out": ["conv2"]
        },
        {
            "in": ["conv2"],
            "type": "Activation",
            "name": "relu1",
            "mode": "ReLU",
            "out": ["conv2"]
        },
        {
            "in": ["conv2"],
            "type": "Pooling",
            "name": "pool2",
            "mode": "max",
            "window": [2,2,2],
            "stride": [2,2,2],
            "out": ["pool2"]
        },
        {
            "in": ["pool2"],
            "type": "Convolution",
            "name": "conv_cls",
            "num_output": 2,
            "window": [5,5,5],
            "padding": [0,0,0],
            "stride": [1,1,1],
            "upscale": [1,1,1],
            "weight_lr_mult": 1.0,
            "weight_decay_mult": 1.0,
            "weight_filler": "Gaussian",
            "weight_filler_param": 0.01,
            "bias_lr_mult": 2.0,
            "bias_decay_mult": 0.0,
            "bias_filler": "Constant",
            "bias_filler_param": 0.0,
            "out": ["cls_pred"]
        },
        {
            "in": ["cls_pred"],
            "type": "Activation",
            "name": "relu1",
            "mode": "ReLU",
            "out": ["cls_pred"]
        },
        {
            "in": ["cls_pred"],
            "type": "Softmax",
            "stable_gradient": true,
            "name": "cls_softmax",
            "out": ["cls_pred"]
        },
        {
            "in": ["cls_pred","cls_label"],
            "type": "Loss",
            "name": "loss_cls",
            "mode": "MultinomialLogistic_StableSoftmax",
            "loss_weight": 10.0
        },
        {
            "in": ["pool2"],
            "type": "Convolution",
            "name": "conv_r",
            "num_output": 4,
            "window": [5,5,5],
            "padding": [0,0,0],
            "stride": [1,1,1],
            "upscale": [1,1,1],
            "weight_lr_mult": 1.0,
            "weight_decay_mult": 1.0,
            "weight_filler": "Gaussian",
            "weight_filler_param": 0.01,
            "bias_lr_mult": 2.0,
            "bias_decay_mult": 0.0,
            "bias_filler": "Constant",
            "bias_filler_param": 0.0,
            "out": ["r_pred"]
        },
        {
            "in": ["r_pred"],
            "type": "Activation",
            "name": "relu1",
            "mode": "ReLU",
            "out": ["r_pred"]
        },
        {
            "in": ["r_pred","r_label","r_weight"],
            "type": "Loss",
            "name": "loss_bbox",
            "mode": "SmoothL1",
            "loss_weight": 200.0
        },
        {
            "in": ["pool2"],
            "type": "Convolution",
            "name": "conv_t",
            "num_output": 3,
            "window": [5,5,5],
            "padding": [0,0,0],
            "stride": [1,1,1],
            "upscale": [1,1,1],
            "weight_lr_mult": 1.0,
            "weight_decay_mult": 1.0,
            "weight_filler": "Gaussian",
            "weight_filler_param": 0.01,
            "bias_lr_mult": 2.0,
            "bias_decay_mult": 0.0,
            "bias_filler": "Constant",
            "bias_filler_param": 0.0,
            "out": ["t_pred"]
        },
        {
            "in": ["t_pred"],
            "type": "Activation",
            "name": "relu1",
            "mode": "ReLU",
            "out": ["t_pred"]
        },
        {
            "in": ["t_pred","t_label","t_weight"],
            "type": "Loss",
            "name": "loss_bbox",
            "mode": "SmoothL1",
            "loss_weight": 5000.0
        }
	]
}

